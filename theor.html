Выделил основные критерии, которые я использовал в анализе популярных фреймворков интеграции веб-приложений на базе JVM:
	открытость проекта;
	базовая концепция и архитектура;
	тестируемость;
	развертываемость (процесс внедрения программного продукта или системы в область его применения);
	популярность;
	коммерческая поддержка;
	поддержка средами разработки;
	перехват ошибок и исключительных ситуаций;
	мониторинг;
	предметно-ориентированный язык;
	количество компонент интерфейсов, технологических компонент и протоколов;
	расширяемость.
<br> Наиболее известными и популярными фреймворками для интеграции веб-приложений на базе JVM являются: Spring Integration, Apache Camel, Mule ESB.
<br> Эти три фреймворка имеют много общего. И многие из критериев моего анализа совпадают для разных фреймворком. Все они реализуют паттерны интеграции веб-приложений на основе архитектуры передачи сообщений. Каждый фреймворк использует одни и те же идею и паттерны интеграции, хоть и под разными названиями и отличающейся реализацией. Например, «роутеры» в Camel идентичны «течениям» в Mule, «компоненты» из Camel называются «адаптерами» в Spring Integration [7].
После добавления библиотек данных фреймворков в Classpath, вы можете использовать предлагаемые возможности будь то обычный проект Java SE, приложение, разворачиваемое в веб-контейнере (например, Tomcat), на сервере приложений (Jboss, Glassfish), в OSGI контейнере или даже в облаке.
Все эти фреймворки с открытым исходным кодом. Существует много примеров с исходными кодами, форумов, сайтов, порталы отслеживания багов, доски голосования за добавление новых возможностей. Сообщество занимается написанием документации, туториалов (судя по количеству документации и примерам, Apache Camel является здесь лидером). Так же о многом говорит немалое число изданий.
<br> Коммерческая поддержка для трех фреймворков осуществляется следующими продавцами [14]:
–	для Spring Integration это SpringSource;
–	для Mule ESB – MuleSoft;
–	для Apache Camel – FuseSoft и Talend.<br> 
          Поддержка средами разработки тоже находится на достойном уровне. Для каждого фреймворка существуют свои визуальные редакторы конфигураций. 
          Все они могут быть задействованы для промышленной разработки, т.к. отвечают всем необходимым требованиям, таким как: обработка ошибок и исключительных ситуаций, автоматизированное тестирование, транзакционность, многопоточность, масштабируемость и мониторинг.
          Если вы знакомы с одним из этих фреймворков, вы можете достаточно быстро и легко освоить остальные из-за схожести идей и концепций. Но также есть и различия, которые позволяют определить, когда использовать тот или иной фреймворк. Самые важные отличия – это число поддерживаемых технологий и объектно-ориентированный язык. Собственно, поэтому я буду концентрировать внимание именно на эти различия. В примерах я буду ипользовать ориентированные на содержание роутеры.
          Spring Integration базируется на хорошо известном Spring и расширяет его поддержкой программной модели интеграции. Вы можете использовать такие вещи, которые предоставляет нам эта библиотека, как внедрение зависимостей, транзационность, компоненты защиты доступа – все то, что вы используете в любых других проектах c Spring. Spring Integration хорош, если вы используете ее для уже существующего проекта на Spring и вам просто нужно добавить поддержку какой-нибудь интеграции. Вам будет легко использовать этот фреймворк, если вы уже работали с другими решениями от Spring. Между тем, Spring Integration поддерживет только самые основные технологии (файл, FTP, JMS, TCP, HTTP). Apache Camel и Mule ESB предоставляют куда больше поддерживаемых технологий и протоколов [15].
          Пример xml-конфигурации представлен на рисунке 2.9.

 
<br> 
Рисунок 2.9 – Пример xml-конфигурации для Spring Integration
<br> 
          Как можно заметить, получается не мало конфигурации. Также можно конфигурировать с помощью Java, но это тоже все выглядит «очень громоздким». Однако визуальный редактор для Eclipse позволяет упростить процесс конфигурации и скрыть от разработчика сотни строк конфигураций, а самое главное – избавить его от их написания. 
           Мое мнение: используйте этот фреймворк в тех случаях, когда вы собираетесь добавить возможность интеграции в существующий проект на Spring с использованием базовых технологий, на которых будет осуществляться интеграция.
          Mule ESB включает в себя некоторый дополнительный функционал, который прямо не относится к фреймворку интеграции веб-приложений (Mule в некотором приближении можно сравнить с Apache ServiceMix, который основан на Apache Camel, но все-таки Mule больше относится к легковесным фреймворкам интеграции, нежели к тяжеловесным интеграционным платформам). Библиотека поставляется в версии для сообщества, которая полностью бесплатна и имеет открытый исходный код, а также в платной версии для Java EE. 
          Как и Spring Integration, Mule использует XML в качестве предметно-ориентированного языка. Кроме того, конфигурацию для Mule читать легче, чем конфигурацию для Spring Integration. Mule Studio предоставляет очень неплохой и интуитивный визуальный дизайнер конфигурации для этого фреймворка [9].
            Пример конфигурации представлен на рисунке 2.10.

 
<br> 
Рисунок 2.10 – пример конфигурации для Mule ESB
<br> 
          Основное отличие и причина, по которой вы можете выбрать этот фреймворк в качестве фреймворка интеграции – это наличие очень интересных коннекторов, поддерживающих такие интерфейсы, как SAP, Tibco Rendevous, Oracle Siebel CRM, Paypal, CICS Transaction Gateway от IBM и другие. Также решающим в выборе может стать тот факт, что Mule ESB отказались от поддержки OSGI [4].
          Apache Camel практически идентичен Mule ESB. Часто можно встретить «разрабатывается сообществом для сообщества», т.е. этот фреймворк с полностью открытым кодом. Он предоставляет поддержку огромного количества интерфейсов, протоколов и технологий (куда больше, чем тот же Mule). Если же вы не нашли компоненту, поддерживающую интересующую вас технологию, вы легко можете создать свою собственную компоненту. 
          Если же вы поклонник проектов на Spring, то стоит заметить, что Apache Camel хорошо интегрируется в Spring проект. Этот фреймворк имеет предметно-ориентированный язык на XML [4]. 
            Пример конфигурации представлен на рисунке 2.11.

 
<br> 
Рисунок 2.11 – Пример конфигурации для Apache Camel
<br> 
          Конфигурация выглядит более читаемой, нежели конфигурация в Spring Integration, и почти такая же, как в Mule ESB. Существует очень хороший визуальный дезайнер конфигурации – Fuse IDE. 
          Одной из отличительных черт этого фреймворка является поддержка педметно-ориенированных языков для Java, Groovy и Scala. Вы можете вообще не писать тонны пугающего XML. 
          Я предпочитаю использовать именно эти предметно-ориентированные языки вместо XML (хотя конфигурацию для фабрик подключений JMS или JDBC я все-таки предпочитаю конфигурировать в отдельном XML файле). Такую конфигурацию намного легче читать, также она имеет лучшую поддержку средами выполнения, статические анализаторы кода позволяют избежать досадных ошибок, которые легко можно допустить в XML конфигурации [16].
            Пример Java DSL представлен на рисунке 2.12.

 
<br> 
Рисунок 2.12 – Пример Java DSL для Apache Camel
<br> <br> 
Статистику и информацию для анализа фреймворков я брал из ресурсов OpenHub. <br> 
Далее представлена информация о языках, использованных в проектах. <br> 
<iframe src='https://www.openhub.net/p/camel/widgets/project_languages', scrolling='no', marginHeight='0', marginWidth='0', style='height: 210px; width: 350px; border: none'></iframe>
<iframe src='https://www.openhub.net/p/mule/widgets/project_languages', scrolling='no', marginHeight='0', marginWidth='0', style='height: 210px; width: 350px; border: none'></iframe>
<iframe src='https://www.openhub.net/p/spring-integration/widgets/project_languages', scrolling='no', marginHeight='0', marginWidth='0', style='height: 210px; width: 350px; border: none'></iframe> <br> 
Apache Camel в 2010 году имела 88 компонент для интеграции, сейчас она имеет 220 компонент, включая интеграции с Facebook, Twitter, Salesforce, Apache Cassandra, AWS, Apache Kafka, Mongo DB, Apache Spark и другими. 
Spring Integration имеет на данный момент 17 компонент. <br> 
<iframe src='https://www.openhub.net/p/camel/widgets/project_basic_stats', scrolling='no', marginHeight='0', marginWidth='0', style='height: 225px; width: 350px; border: none'></iframe>
<iframe src='https://www.openhub.net/p/mule/widgets/project_basic_stats', scrolling='no', marginHeight='0', marginWidth='0', style='height: 225px; width: 350px; border: none'></iframe>
<iframe src='https://www.openhub.net/p/spring-integration/widgets/project_basic_stats', scrolling='no', marginHeight='0', marginWidth='0', style='height: 225px; width: 350px; border: none'></iframe> <br> 
Как видно из рисунков выше, наиболее активный процесс разработки имеет Apache Camel (174 вкладчиков в месяц для Apache Camel, около 42 для Mule ESB и 24 для Spring Integration).  <br> 
Данные проекты начали развиваться приблизительно в одно время – 2005 – 2007 года. <br>
Spring Integration имеет около 500 тысяч строк кода, оцениваемые трудозатраты в общей сложности составляют 105 лет усилий. Для Apache Camel эти цифры вышли такими: около 1800 тысяч строк кода или 330 лет. Mule ESB: 950 тысяч строк кода и 240 лет. Эта статистика приведена ниже.
 <br> <iframe src='https://www.openhub.net/p/camel/widgets/project_cocomo', scrolling='no', marginHeight='0', marginWidth='0', style='height: 205px; width: 350px; border: none'></iframe>
<iframe src='https://www.openhub.net/p/mule/widgets/project_cocomo', scrolling='no', marginHeight='0', marginWidth='0', style='height: 205px; width: 350px; border: none'></iframe>
<iframe src='https://www.openhub.net/p/spring-integration/widgets/project_cocomo', scrolling='no', marginHeight='0', marginWidth='0', style='height: 205px; width: 350px; border: none'></iframe> <br> 
Что касается литературы, то Spring Integration посвящены три книги («Spring Integration in Action», «Pro Spring Integration», «Just Spring Integration»), в которых идет речь о паттернах интеграции корпоративных приложений и повторяется неплохая документация к этому фреймворку. Apache Camel имеет одну книгу – «Apache Camel in Action», информация в которой повторяет также неплохую документацию по этому продукту. Если вы захотите использовать Mule ESB, то кроме официальной документации вы будете иметь две книги, посвященные фреймворку: «Mule ESB Cookbook» и «Mule in Action».
Далее я привел изображения рабочих экранов визуальных дизайнеров конфигурации трех фреймворков. <br> 
На рисунке А.1 вы можете увидеть рабочую область Spring Integration Designer в Spring Tool Suite для визуального конструирования конфигурации. Графические элементы интерфейса просты в изучении, их не много. На рисунке А.2 представлена рабочая область расширения для Intellij IDEA, с помощью которой можно конструировать в визуальном режиме конфигурацию для Apache Camel. Здесь куда больше активных элементов, так как этот фреймворк предоставляет куда больше возможностей конфигурации. Существует Talend Studio, которая предоставляет возможность генерации Java конфигурации для Apache camel, но зачастую получается очень много лишнего кода, который разработчик не имеет возможность редактировать. Все элементы организованны в группы по назначению и применению. На рисунке А.3 изображена рабочая область в Mule Studio для создания конфигурации на основе Mule ESB [17].           
<br> 
Для анализа я решил использовать статистику по пользовательским запросам из Google Trends. Из Google Trends видно, что все фреймворки начали развиваться в одно время. В начале развития наибольшую популярность имел Mule ESB. Его популярность со временем падает. Apache Camel и Spring Integration, напротив, становятся все более популярными [14]. 
<br> 

